<!DOCTYPE html>
<HTML>
<HEAD>
	<TITLE> ZTREE FAQ - v3 Ajax </TITLE>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="../../../css/faq.css" type="text/css">
</HEAD>
<BODY>
<h1>关于异步加载</h1>
<div class="content_wrap">
	<div class="">
		<ul class="info">
			<li class="title"><h2>1、什么是异步加载？</h2>
				<ul class="list">
				<li>这个问题与 zTree 无关，但必须要解释一下，因为很多初学者都在这个问题上犯糊涂。</li>
				<li>准确的说应该是：“什么是 AJAX ?”--  AJAX 即“Asynchronous JavaScript and XML”（异步JavaScript和XML)；AJAX 是一种技术，可以在不影响当前页面的情况下与后台服务端进行通讯，获取相应的数据。更多的解释大家可以去网上搜索一下。</li>
				</ul>
			</li>
			<li class="title"><h2>2、异步加载的特性</h2>
				<ul class="list">
					<li>请注意最前面的两个字 “异步”，与他类似还有一个词 “同步”，顾名思义“同步”就是前面的语句不执行完就不会执行后面的语句，“异步”就不一样了，发起异步请求后，不管是否得到结果，都不影响当前代码的后续执行。</li>
					<li>经常有朋友问：<span class="highlight_red">“异步加载模式下，初始化 zTree 以后为什么无法得到全部节点数据？”、“异步加载模式下，初始化 zTree 以后为什么无法使用 expandAll 方法将全部节点展开 ？”</span>等等类似的问题，看了前面的解释，应该明白了吧？当你发起异步请求后，代码会立刻去执行 getNodes 方法 或 expandAll 方法，这时候异步加载的数据还未收到，当然操作就失效了。所以你会发现当你先 alert 一下，会发现又一切正常了-- 就是这个原因。</li>
					<li class="highlight_red">所以，对于异步加载模式下，需要在获取节点后处理的事情，尽量利用 onAsyncSuccess / onAsyncError 事件回调函数去处理，这样才能保证异步加载正常完毕后执行你需要的操作。</li>
					<li class="title">
<pre xmlns=""><code>利用 setTimeout 举个异步的例子，对照着执行看看吧：
//No.1
var a = 1;
a++;
var b = a;
alert(b);

//No.2
var a = 1;
setTimeout(function(){a++;}, 500);
var b = a;
alert(b);
</code></pre>
					</li>
				</ul>
			</li>
		</ul>
	</div>
</div>
</BODY>
</HTML>